---
description: Active clang-tidy checks — enforced as errors in every build
globs: **/*.h,**/*.c
alwaysApply: true
---

# clang-tidy Rules

All warnings are treated as errors (`WarningsAsErrors: '*'`). Every rule below must be satisfied before writing or suggesting code.

## Active check groups

`bugprone-*`, `readability-*`, `performance-*`, `portability-*`, `misc-*`, `clang-analyzer-*`

Disabled: `bugprone-easily-swappable-parameters`, `readability-magic-numbers`, `readability-function-cognitive-complexity`, `misc-include-cleaner`, `performance-avoid-endl`

## Identifier naming (`readability-identifier-naming`)

| Kind | Case | Example |
|---|---|---|
| Functions | `lower_case` | `mutex_lock` |
| Variables / parameters | `lower_case` | `byte_count` |
| Global variables | `lower_case` | `global_var i32 frame_count` |
| Global / enum constants | `UPPER_CASE` | `I32_MAX`, `COLOR_RED` |
| Macros | `UPPER_CASE` | `PLATFORM_WINDOWS` |
| Typedefs / structs / enums | `lower_case` | `vec3`, `color_mode` |

## Identifier length (`readability-identifier-length`)

Parameter and variable names must be **at least 3 characters** long.

```c
// ❌ BAD — too short
func void mutex_lock(mutex m);

// ✅ GOOD
func void mutex_lock(mutex mtx);
```

Common short-form replacements: `m` → `mtx`, `s` → `sem`, `t` → `thr`, `p` → `ptr`, `n` → `cnt`, `i` → `idx`.

## Other rules to keep in mind

- Avoid bug-prone constructs flagged by `bugprone-*` (e.g. integer overflows, suspicious string usage).
- Prefer performance-safe patterns flagged by `performance-*`.
- All `clang-analyzer-*` static analysis checks must pass (null dereference, use-after-free, etc.).
